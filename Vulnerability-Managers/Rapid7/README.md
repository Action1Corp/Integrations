# Action1 -- Rapid7 InsightVM Integration Quickstart Guide

## Overview

The **Action1--Rapid7 InsightVM Integration** automates the correlation of
vulnerability data between Rapid7 InsightVM and Action1,
allowing IT and security teams to:

-   Correlate detected vulnerabilities from Rapid7 InsightVM
-   Match vulnerabilities to Action1-managed endpoints
-   Detect "unknown" or "missing" assets from each platform
-   Generate reports for compliance and tracking

This guide explains what the integration does, how to set up API
credentials for both Action1 and Rapid7 InsightVM, and how to run the PowerShell
script.
It is recommended to run the script on the same frequency as Rapid7 InsightVM vulnerability scans.

## What the Integration Does

The PowerShell integration script:

-   Connects to Rapid7 InsightVM API to pull vulnerability data
-   Connects to Action1 Cloud Console to pull vulnerability data
-   Compares vulnerability data to identify:
    -   Patchable vulnerabilities
    -   Non-patchable vulnerabilities
    -   CVEs not recognized by Action1
    -   Missing assets from Action1
    -   Missing assets from Rapid7 InsightVM
-   **Optional:** Sets Custom Attribute on Action1 Endpoints with Vulnerability Manager Severity Counts.  Custom Attribute name must be manually created in Action1 console.
-   **Optional:** Emails generated reports

## Prerequisites

Before running the integration:

-   PowerShell **5.1 or later** (Windows 10/11, Server 2016+)
-   Network access to:
    -   `https://<Rapid7Region>.api.insight.rapid7.com`
    -   `https://app.action1.com`
-   API credentials for **both** platforms

## Getting Action1 API Credentials

1.  Log in to Action1: https://app.action1.com
2.  Go to **Users & API Credentials**
3.  Click **New API Credentials**
4.  Save:
    -   Client ID
    -   Client Secret
    -   Organization ID

Use these in the script:

    $Action1ApiKey = "<your_client_id>"
    $Action1ApiSecret = "<your_client_secret>"
    $Action1OrgId = "<your_organization_id>"

## Getting Rapid7 InsightVM API Key and Region

1.  Log in to: https://insight.rapid7.com/login
2.  After signing in, retrieve your region code from the URL (for example, https://us2.exposure-analytics.insight.rapid7.com/, where us2 is the region code).
2.  Go to **Settings â†’ API Keys**
3.  Generate New User Key
4.  Save the API Key

Use in script:

    $Rapid7ApiKey = "<your_api_key>"
	$Rapid7Region = "<your_region_code>"

## Running the Integration Script

Update the parameters before running the script.

### Parameters

| Parameter           | Description                                                                 |
|---------------------|-----------------------------------------------------------------------------|
| Rapid7ApiKey     | Rapid7 InsightVM API key                                                      |
| Rapid7Region     | Rapid7 InsightVM region                                                      |
| Action1APIKey        | Action1 API access key                                                      |
| Action1APISecret     | Action1 API secret key                                                      |
| Action1OrgID         | Action1 organization (tenant) ID                                            |
| Action1Region        | Action1 regional environment (e.g., us, eu)                                 |
| OutputDirectory      | Directory where generated reports will be saved                             |
| SetCustomAttributes     | Enables setting custom attribute with vulnerability count (true/false)   |
| AttributeName           | The name of the existing Custom Atribute to be modified in Action1       |
| SendEmail            | Enables email delivery of reports (true/false)                              |
| SmtpServer           | SMTP server hostname or IP address                                          |
| SmtpPort             | SMTP server port                                                            |
| SmtpUser             | SMTP authentication username                                                |
| SmtpPassword         | SMTP authentication password                                                |
| MailFrom             | Sender email address                                                        |
| MailTo               | Recipient email address(es), comma-separated                                |
| MailSubject          | Subject line for the report email                                           |
| UseSsl               | Enables SSL/TLS for SMTP communication (true/false)                         |

## Output

| File Name                                              | Description |
|--------------------------------------------------------|-------------|
| Action1_Endpoints_Not_In_Rapid7_InsightVM.csv           | Lists endpoints that exist in Action1 but were not found in Rapid7 InsightVM, indicating potential scan coverage gaps or stale Action1 inventory. |
| Rapid7_InsightVM_Hosts_Not_In_Action1.csv               | Lists hosts discovered by Rapid7 InsightVM that do not exist in Action1, highlighting assets that may need to be added or imported as unmanaged endpoints. |
| Rapid7_InsightVM_CVEs_for_Remediation.csv               | Contains vulnerabilities identified by Rapid7 InsightVM that are recognized by Action1 and have an available remediation path. |
| Rapid7_InsightVM_CVEs_with_no_patch_available.csv       | Lists vulnerabilities reported by Rapid7 InsightVM for which no patch is currently available in Action1. |
| Rapid7_InsightVM_CVEs_not_recognized_by_Action1.csv     | Lists vulnerabilities reported by Rapid7 InsightVM that are not currently recognized or mapped within Action1. |
| Rapid7_InsightVM_vuln_export.csv                        | Raw vulnerability export from Rapid7 InsightVM in CSV format, used as the source input for correlation and analysis. |
